#:import utils kivy.utils
<Mp4Recorder>:

    MDBoxLayout:
        orientation:'vertical'
        spacing: "20dp"
        
        MDLabel:
            id: time_label
            text: '00:00:00'
            font_size: 24
            color: "orange"
            halign: "left"
            size_hint: 1, .3
            multiline: True

        MDRaisedButton:
            id: record_button
            text: "START Recording"
            font_size: 24
            halign: "center"
            size_hint: 0.75, 0.25
            pos_hint: {'center_x':0.5, 'center_y':0.5}
            color: "black"
            background_normal: ''
            background_color: utils.get_color_from_hex('fbb800')
            on_release: root.record()

        MDRaisedButton:
            id: email_button
            text: 'Email [No recording to email]'
            font_size: 24
            halign: "center"
            size_hint: 0.75, 0.25
            pos_hint: {'center_x':0.5, 'center_y':0.5}
            color: "black"
            background_normal: ''
            background_color: utils.get_color_from_hex('fbb800')
            #https://stackoverflow.com/questions/61728185/python-kivy-how-to-disable-enable-a-button
#           disabled: True if root.state != 'ready' or root.email_ok2send == False else False
            on_release: root.email()

        MDRaisedButton:
            id: emailfile_button
            text: 'Email File'
            font_size: 24
            halign: "center"
            size_hint: 0.75, 0.25
            pos_hint: {'center_x':0.5, 'center_y':0.5}
            color: "black"
            background_normal: ''
            background_color: utils.get_color_from_hex('fbb800')
            disabled: True if root.state != 'ready' else False
            on_release: root.emailfile()                

        MDRaisedButton:
            id: checkwifi_button
            text: root.wifi_str
            font_size: 24
            halign: "center"
            size_hint: 0.75, 0.25
            pos_hint: {'center_x':0.5, 'center_y':0.5}
            color: "black"
            background_normal: ''
            background_color: utils.get_color_from_hex('fbb800')
            on_release: root.checkwifi()                

        MDRaisedButton:
            id: exit_button
            text: 'Exit'
            font_size: 24
            halign: "center"
            size_hint: 0.75, 0.25
            pos_hint: {'center_x':0.5, 'center_y':0.5}
            color: "black"
            background_normal: ''
            background_color: utils.get_color_from_hex('fbb800')
            on_release: root.exit()

        MDScrollView:
            orientation: "vertical"
            MDList:
                pos_hint: {"x":0, "top":1}
                id: container

<LoadDialog>:

    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        
        # note -  see \\wsl.localhost\Ubuntu\home\dovczitter\Mp4Recorder\.venv\lib\python3.9\site-packages\kivy\data\style.kv
        # https://stackoverflow.com/questions/61349456/adjust-kivy-filechooser-font-size
        # https://stackoverflow.com/questions/34298747/kivy-filechooserlistview-modifying-the-display-of-the-file-list
        FileChooser:
            id: filechooser
            path: "."
            sort_func: root.default_sort_func
            FileChooserListLayout

        MDBoxLayout:
            height: 20

            MDRaisedButton:
                id: emailfile_button
                text: "EmailFile"
                size_hint: 0.5, 0.20
                font_size: 24
                on_release: root.emailfile(filechooser.path, filechooser.selection)
                
            MDRaisedButton:
                id: cancel_button
                text: "Cancel"
                font_size: 24
                size_hint: 0.5, 0.20
                on_release: root.cancel()
